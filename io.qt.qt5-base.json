{
    "name": "qt5-qtbase",
    "cleanup-platform": [
        "/bin",
        "/mkspecs"
    ],
    "build-options" : {
        "arch" : {
            "x86_64" : {
                "config-opts" : [
                    "-debug",
                    "-reduce-relocations"
                ]
            },
            "arm" : {
                "config-opts" : [
                    "-no-reduce-relocations",
                    "-no-use-gold-linker",
                    "-optimize-size"
                ]
            }
        }
    },
    "config-opts": [
        "-confirm-license",
        "-opensource",
        "-shared",
        "-platform linux-g++",
        "-optimized-qmake",
        "-nomake examples",
        "-nomake tests",
        "-system-harfbuzz",
        "-system-sqlite",
        "-accessibility",
        "-dbus-linked",
        "-fontconfig",
        "-glib",
        "-icu",
        "-openssl-linked",
        "-no-pch",
        "-no-rpath",
        "-no-directfb",
        "-no-linuxfb",
        "-no-kms",
        "-no-cups",
        "-system-proxies",
        "-gtk"
    ],
    "sources": [
        {
            "type": "archive",
            "url": "http://download.qt.io/archive/qt/5.9/5.9.3/submodules/qtbase-opensource-src-5.9.3.tar.xz",
            "sha256": "9e7c44005e7691dc7c85165bd4510282c47f0163521f4973eab71dbdb39a9982"
        },
        {
            "type": "shell",
            "commands": [ "mv configure configure.qt" ]
        },
        {
            "type": "patch",
            "path": "qt5-base_patches/qtbase-flatpak-portals-filechooser.patch"
        },
        {
            "type": "patch",
            "path": "qt5-base_patches/qtbase-flatpak-portals-services.patch"
        },
        {
            "type": "script",
            "commands": [
                "processed=`sed -e 's/--/-/g ; s/=/ /g' <<< $@`",
                "./configure.qt $processed"
            ],
            "dest-filename": "configure"
        }
    ]
}
